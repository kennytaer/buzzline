import{r as p,j as e}from"./index-C-5hEMXZ.js";import{u as T,a as F,b as z,F as C}from"./components-CcwgdvBG.js";async function M(s){const r=new FormData;r.append("files",s),console.log("Uploading file:",{name:s.name,size:s.size,type:s.type,lastModified:s.lastModified});const t=await fetch("https://file-uploader.benchmetrics.workers.dev/upload",{method:"POST",body:r,headers:{"x-api-key":"benchmetrics-3dc3c222-64ab-4d44-abd5-84f648e1d8af"}});if(console.log("Upload response status:",t.status),console.log("Upload response headers:",Object.fromEntries(t.headers.entries())),!t.ok){const i=await t.text();throw console.log("Upload error response:",i),new Error(`Upload failed: ${t.status} ${i}`)}const n=await t.text();console.log("Raw response text:",n);const l=JSON.parse(n);if(console.log("Upload API response:",l),!Array.isArray(l)||l.length===0)throw console.error("Unexpected response format - empty array or not an array"),new Error("Upload failed: Empty response from server");const a=l[0];if(console.log("Upload result:",a),!a)throw new Error("Upload failed: No upload result in response");return{url:a.imageUrl||a.fileUrl,id:a.imageId||a.fileId}}function E(){var h,b,f,j,N,v,w,U,S;const{settings:s}=T(),r=F(),[t,n]=z(),l=t.get("tab"),[a,i]=p.useState(l||"signature"),[c,u]=p.useState(!1),[x,y]=p.useState(((h=s.emailSignature)==null?void 0:h.companyLogoUrl)||""),g=o=>{i(o),n({tab:o})},L=async o=>{var P;const d=(P=o.target.files)==null?void 0:P[0];if(d){if(!d.type.startsWith("image/")){alert("Please select an image file.");return}if(d.size>5*1024*1024){alert("File size must be less than 5MB.");return}u(!0);try{const m=await M(d);y(m.url);const k=document.getElementById("companyLogoUrl");k&&(k.value=m.url)}catch(m){console.error("Upload error:",m),alert("Failed to upload file. Please try again.")}finally{u(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organization Settings"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your organization's email signature, company information, and sales team."})]})}),r&&"success"in r&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("p",{className:"ml-3 text-sm text-green-800",children:r.success})]})}),r&&"error"in r&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"ml-3 text-sm text-red-800",children:r.error})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>g("signature"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="signature"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Email Signature"}),e.jsx("button",{onClick:()=>g("company"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="company"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Company Info"})]})}),a==="signature"&&e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Default Email Signature"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"This signature will be used as the default for all email campaigns. You can override it per campaign if needed."}),e.jsxs(C,{method:"post",className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"actionType",value:"updateSignature"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salesPersonName",className:"block text-sm font-medium text-gray-700",children:"Sales Person Name"}),e.jsx("input",{type:"text",name:"salesPersonName",id:"salesPersonName",defaultValue:((b=s.emailSignature)==null?void 0:b.salesPersonName)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"John Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salesPersonTitle",className:"block text-sm font-medium text-gray-700",children:"Sales Person Title"}),e.jsx("input",{type:"text",name:"salesPersonTitle",id:"salesPersonTitle",defaultValue:((f=s.emailSignature)==null?void 0:f.salesPersonTitle)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"Sales Manager"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"salesPersonPhone",className:"block text-sm font-medium text-gray-700",children:"Sales Person Phone"}),e.jsx("input",{type:"tel",name:"salesPersonPhone",id:"salesPersonPhone",defaultValue:((j=s.emailSignature)==null?void 0:j.salesPersonPhone)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"unsubscribeUrl",className:"block text-sm font-medium text-gray-700",children:"Unsubscribe URL"}),e.jsx("input",{type:"url",name:"unsubscribeUrl",id:"unsubscribeUrl",defaultValue:((N=s.emailSignature)==null?void 0:N.unsubscribeUrl)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"https://yourcompany.com/unsubscribe"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Logo"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"url",name:"companyLogoUrl",id:"companyLogoUrl",value:x,onChange:o=>y(o.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"https://yourcompany.com/logo.png"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"logo-upload",onChange:L,disabled:c}),e.jsx("label",{htmlFor:"logo-upload",className:`cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 ${c?"opacity-50 cursor-not-allowed":""}`,children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload"]})})]})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Upload an image file (max 5MB) or enter a URL directly. Recommended size: 180px wide."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Save Email Signature"})})]}),((v=s.emailSignature)==null?void 0:v.salesPersonName)&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Preview:"}),e.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:`
                    <br/>
                    <p style="margin:0px;">Chat soon,</p>
                    <p style="margin:0px;"><strong>${s.emailSignature.salesPersonName}</strong></p>
                    ${s.emailSignature.salesPersonTitle?`<p style="margin:0px;">${s.emailSignature.salesPersonTitle}</p>`:""}
                    <img src="${x||"https://imagedelivery.net/fdADyrHW5AIzXwUyxun8dw/b95b1ebf-081b-454a-41f0-4ef26623c400/public"}" width="180px" style="display:block;margin:0px 0px 0px -8px;">
                    <p style="display:block;margin:5px 0px;color:#343433;">No longer want to receive these types of emails? <a href="${s.emailSignature.unsubscribeUrl||"#"}" target="_blank" style="font-weight:600;">Unsubscribe here.</a></p>
                  `}})]})]})}),a==="company"&&e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Company Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Basic information about your company for campaigns and correspondence."}),e.jsxs(C,{method:"post",className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"actionType",value:"updateCompany"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsx("input",{type:"text",name:"companyName",id:"companyName",defaultValue:((w=s.companyInfo)==null?void 0:w.name)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"Your Company Name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyWebsite",className:"block text-sm font-medium text-gray-700",children:"Website"}),e.jsx("input",{type:"url",name:"companyWebsite",id:"companyWebsite",defaultValue:((U=s.companyInfo)==null?void 0:U.website)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"https://yourcompany.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyAddress",className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("textarea",{name:"companyAddress",id:"companyAddress",rows:3,defaultValue:((S=s.companyInfo)==null?void 0:S.address)||"",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 px-3 py-2",placeholder:"123 Main St, City, State 12345"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Save Company Info"})})]})]})})]})}export{E as default};
